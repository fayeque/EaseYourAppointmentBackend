(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{3509:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/appointment/doctor/details/[id]",function(){return n(3214)}])},3214:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(8520),a=n.n(s),i=n(5893),r=n(1163),c=n(8100),o=n(9669),l=n.n(o),d=n(7294),x=n(1664);function p(e,t,n,s,a,i,r){try{var c=e[i](r),o=c.value}catch(l){return void n(l)}c.done?t(o):Promise.resolve(o).then(s,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(s,a){var i=e.apply(t,n);function r(e){p(i,s,a,r,c,"next",e)}function c(e){p(i,s,a,r,c,"throw",e)}r(void 0)}))}}var m=u(a().mark((function e(t){var n,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,l().get(t,n);case 4:return s=e.sent.data,console.log("response is here in details ",s),e.abrupt("return",s);case 9:throw e.prev=9,e.t0=e.catch(0),(i=new Error("An error occurred while fetching the data.")).info=s,i.status=s.status,i;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));function h(){var e=(0,c.kY)().mutate,t=(0,r.useRouter)().query.id;console.log("appniD",t);var n=(0,d.useState)(!0);n[0],n[1];console.log("rerenders");var s=(0,c.ZP)("/api/appointment/doctor/".concat(t),m),o=s.data,p=s.error;if(console.log("error in swr hook",p),!o)return p&&401==p.status?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Please login first"}),(0,i.jsx)(x.default,{href:"/auth/doctorSignin",children:"Signin"})]}):(0,i.jsx)("p",{children:"Loading..."});var h=u(a().mark((function n(s){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("/api/appointment/completed/".concat(t,"/").concat(s));case 3:n.sent.data,e("/api/appointment/doctor/".concat(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),f=u(a().mark((function n(s){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("/api/appointment/undo/".concat(t,"/").concat(s));case 3:n.sent.data,e("/api/appointment/doctor/".concat(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),g=u(a().mark((function n(s){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("/api/appointment/invisit/".concat(t,"/").concat(s));case 3:n.sent.data,e("/api/appointment/doctor/".concat(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),v=u(a().mark((function n(s){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("/api/appointment/rejected/".concat(t,"/").concat(s));case 3:n.sent.data,e("/api/appointment/doctor/".concat(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsxs)("div",{className:"text-sm font-small px-4 text-gray-800",children:["Total-",o.total]}),(0,i.jsxs)("div",{className:"text-sm font-small px-4 text-gray-500",children:["Completed - ",o.completed]}),(0,i.jsxs)("div",{className:"text-sm font-small px-4 text-gray-500",children:["Pending - ",o.pending]}),(0,i.jsxs)("div",{className:"text-sm font-small px-4 text-gray-500",children:["Current - ",-1==o.currentVisiting?"Waiting":o.currentVisiting]})]}),(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,i.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile No."}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.appointments.map((function(e,t){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsxs)("div",{className:"text-md font-medium text-gray-600",children:[t+1,". ",e.name]}),"pending"==e.status?(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:function(){g(e._id)},children:"Invisit"}),(0,i.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900 px-6",onClick:function(){v(e._id)},children:"Rejected"})]}):"invisit"==e.status?(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:function(){h(e._id)},children:"Completed"}),(0,i.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900 px-6",onClick:function(){f(e._id)},children:"Undo"})]}):(e.status,(0,i.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:function(){f(e._id)},children:"Undo"}))]})})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm text-gray-900",children:e.mobile})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"pending"==e.status?(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800",children:e.status}):"invisit"==e.status?(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.status}):"completed"==e.status?(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.status}):(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:e.status})})]},t)}))})]})})})})})]})}}},function(e){e.O(0,[100,774,888,179],(function(){return t=3509,e(e.s=t);var t}));var t=e.O();_N_E=t}]);